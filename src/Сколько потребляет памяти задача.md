
## Пример 1

```cpp
#include <Arduino.h>
#include <STM32FreeRTOS.h>
HardwareSerial uartPort(PA10, PA9);

void vMeasureTask(void *pvParameters) {
	while(1) {
		uint32_t uxStackWords = (uint32_t)uxTaskGetStackHighWaterMark(NULL); // Измеряем свободный стек конкретной задачи
		uartPort.printf("Free stack: %d bytes\n", uxStackWords * 4);
		vTaskDelay(1000);
	}
}

void setup() {
	uartPort.begin(115200);
	xTaskCreate(vMeasureTask, "MEASURE", 1024/4, NULL, 2, NULL);
	vTaskStartScheduler();
}
void loop() {}
```

Ответ в serial: **Free stack: 32 bytes**

Итак:
- Общий объем памяти, выделенный для задачи: 1024 байта
- Максимальный объем стека, который фактически использовала задача: 992 байта
- Осталось свободно: 32 байта

## Пример 2

```cpp
#include <Arduino.h>
#include <STM32FreeRTOS.h>
HardwareSerial uartPort(PA10, PA9);

void vMeasureTask(void *pvParameters) {
	uint32_t counter = 0;
	while(1) {
		uint32_t a = counter++;
		uint32_t b = counter % 10;
		uint32_t c = a + b;
		uint32_t uxStackWords = (uint32_t)uxTaskGetStackHighWaterMark(NULL); // Измеряем свободный стек конкретной задачи
		uartPort.printf("a + b = %d Free stack: %d bytes\n",c , uxStackWords * 4);
		vTaskDelay(1000);
	}
}

void setup() {
	uartPort.begin(115200);
	xTaskCreate(vMeasureTask, "MEASURE", 1024/4, NULL, 2, NULL);
	vTaskStartScheduler();
}
void loop() {}
```

Ответ в serial:  **a + b = 5 Free stack: 24 bytes**